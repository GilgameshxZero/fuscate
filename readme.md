# fuscate

Bind two IPv4 TCP ports to each other, obfuscating data in one direction and de-obfuscating in the other. Use to bypass deep packet inspection (DPI) by tunneling a connection inside.

## Arguments

Argument|Usage
-|-
`--direction`|`server` (default) obfuscates data from the client and de-obfuscates data from the server. `client` performs the opposite.
`--listen`|address (host:port) (default 0.0.0.0:0 = random) to listen for transformed data.
`--speak`|address (host:port) (default 127.0.0.1:80 = random) to push transformed data.
`--key`|obfuscation key (default empty = transparent).

We refer to the connection with the `listen` address as the connection with the "client"; the connection with the `speak` address as the connection with the "server". `fuscate` maintains two connected sockets for each connection; one is generated by the client, and the other is generated by `fuscate` with the server for each client socket. Disconnection of either of these sockets will disconnect the other, and thus the connection.

## Example

For example, to obfuscate an OpenVPN connection, use the following configuration.

OpenVPN server at `server.com`:

```conf
port 1194
proto tcp
```

`fuscate` on OpenVPN server:

```bash
--direction server
--listen 0.0.0.0:80
--speak 127.0.0.1:1194
--key ...
```

`fuscate` on OpenVPN client:

```bash
--direction client
--listen 0.0.0.0:4911
--speak server.com:80
--key ...
```

OpenVPN client:

```conf
port 4911
proto tcp
```

## Obfuscation

Packets are coalesced and wrapped in fixed-length HTTP/1.1 queries and corresponding responses. The `key` determines the distribution of query method, query route, and headers, including the data type and request/response length. The data itself is also encrypted via a simple Vigenere cipher.
